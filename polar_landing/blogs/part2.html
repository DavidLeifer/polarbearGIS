<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
	<title></title>
	<meta name="generator" content="LibreOffice 7.0.3.1 (MacOSX)"/>
	<meta name="created" content="2020-12-19T11:14:36.773482259"/>
	<meta name="changed" content="2021-03-27T23:24:16.312760937"/>
	<style type="text/css">
		@page { size: 8.5in 11in; margin: 0.79in }
		p { margin-bottom: 0.1in; line-height: 115%; background: transparent }
		h3 { margin-top: 0.1in; margin-bottom: 0.08in; background: transparent; page-break-after: avoid }
		h3.western { font-family: "Liberation Serif", serif; font-size: 14pt; font-weight: bold }
		h3.cjk { font-family: "Songti SC"; font-size: 14pt; font-weight: bold }
		h3.ctl { font-family: "Arial Unicode MS"; font-size: 14pt; font-weight: bold }
		h4 { margin-top: 0.08in; margin-bottom: 0.08in; background: transparent; page-break-after: avoid }
		h4.western { font-family: "Liberation Serif", serif; font-size: 12pt; font-weight: bold }
		h4.cjk { font-family: "Songti SC"; font-size: 12pt; font-weight: bold }
		h4.ctl { font-family: "Arial Unicode MS"; font-size: 12pt; font-weight: bold }
		pre { font-family: "Liberation Mono", monospace; font-size: 10pt; background: transparent }
		strong { font-weight: bold }
		a:link { color: #000080; so-language: zxx; text-decoration: underline }
		em { font-style: italic }
		a:visited { color: #800000; so-language: zxx; text-decoration: underline }
	</style>
</head>
<body lang="en-US" link="#000080" vlink="#800000" dir="ltr"><h3 class="western" style="margin-top: 0.21in; margin-bottom: 0.21in; font-variant: normal; font-style: normal; font-weight: normal; line-height: 0.28in; orphans: 2; widows: 2">
<font color="#292929"><font face="charter, Georgia, Cambria, Times New Roman, Times, serif"><font size="4" style="font-size: 13pt"><u>Adding
Steez to Geoserver Timeseries Rasters with QGIS SLD: Part&nbsp;2</u></font></font></font></h3>
<p><strong>Plug</strong> to <a href="http://nhuthehoang.com/" target="_blank">http://nhuthehoang.com/</a>
for telling me about GCP and Geoserver.</p>
<p><strong>Part </strong><strong>1</strong><strong>:
</strong><a href="https://www.davidjleifer.com/blogs/part1.html"><strong><font color="#000080"><span lang="zxx"><u><span style="font-weight: normal">https://www.davidjleifer.com/blogs/part</span></u></span></font></strong><strong><font color="#000080"><span lang="zxx"><u><span style="font-weight: normal">1</span></u></span></font></strong><strong><font color="#000080"><span lang="zxx"><u><span style="font-weight: normal">.html</span></u></span></font></strong></a></p>
<p><strong>Part 3:</strong>
<strong><a href="https://www.davidjleifer.com/blogs/part3.html"><font color="#000080"><span lang="zxx"><u><span style="font-weight: normal">https://www.davidjleifer.com/blogs/part3.html</span></u></span></font></a></strong></p>
<p><strong>Part 4: </strong><strong><a href="https://www.davidjleifer.com/blogs/part4.html"><font color="#000080"><span lang="zxx"><u><span style="font-weight: normal">https://www.davidjleifer.com/blogs/part4.html</span></u></span></font></a></strong></p>
<p><strong>Part 5: </strong><strong><a href="https://www.davidjleifer.com/blogs/part5.html"><font color="#000080"><span lang="zxx"><u><span style="font-weight: normal">https://www.davidjleifer.com/blogs/part5.html</span></u></span></font></a></strong></p>
<p><strong>Part 6: </strong><a href="https://www.davidjleifer.com/blogs/part6.html"><font color="#000080"><span lang="zxx"><u>https://www.davidjleifer.com/blogs/part6.html</u></span></font></a></p>
<p><strong>Part </strong><strong>7</strong><strong>:
</strong><a href="https://www.davidjleifer.com/blogs/part7.html"><font color="#000080"><span lang="zxx"><u>https://www.davidjleifer.com/blogs/part7.html</u></span></font></a></p>
<p><strong>Part </strong><strong>8</strong><strong>:
</strong><a href="https://www.davidjleifer.com/blogs/part8.html"><font color="#000080"><span lang="zxx"><u>https://www.davidjleifer.com/blogs/part8.html</u></span></font></a></p>
<p><strong>Part </strong><strong>9</strong><strong>:
</strong><a href="https://www.davidjleifer.com/blogs/part9.html"><font color="#000080"><span lang="zxx"><u>https://www.davidjleifer.com/blogs/part9.html</u></span></font></a></p>
<p><br/>
<br/>

</p>
<p>This week we will be adding steez (see style) to these rasters by
exporting an SLD using QGIS 3.X.</p>
<h4 class="western">Step 1: Downloading QGIS 3.X, Styling Rasters,
and Exporting as&nbsp;SLD</h4>
<p>For this step, we will need to download and install QGIS 3.X from
the source:</p>
<p><strong><a href="https://qgis.org/en/site/forusers/download.html">Download
QGIS</a></strong><a href="https://qgis.org/en/site/forusers/download.html"><br/>
</a><em><a href="https://qgis.org/en/site/forusers/download.html">QGIS
in OSGeo4W: In the installer choose Desktop Express Install and
select QGIS to install the latest release. To get…</a></em><a href="https://qgis.org/en/site/forusers/download.html">qgis.org</a></p>
<p>Unzip the file and follow the instructions to install QGIS 3.X on
your computer.</p>
<p>Open up QGIS 3.X and add one of the precipitation rasters for the
state of Oregon by clicking “Layer” on the top menu, hovering
over “Add Layer”, and clicking on “Add Raster Layer…” The
rasters have been made available at this link in a zipped package:
<a href="https://drive.google.com/file/d/1Xcw_zM1kfQiXoHbr5KuaBMaKReCAr7mt/view?usp=sharing" target="_blank">https://drive.google.com/file/d/1Xcw_zM1kfQiXoHbr5KuaBMaKReCAr7mt/view?usp=sharing</a></p>
<p><img src="part2_html_78435546c1690608.png" name="Image1" align="bottom" width="740" height="436" border="0"/>
</p>
<p>Next, click on the “…” and navigate to the unzipped raster.
This is a GeoTIFF and has the file extension&nbsp;.tiff.</p>
<p><img src="part2_html_dea2974252bc0f60.png" name="Image2" align="bottom" width="645" height="483" border="0"/>
</p>
<p>Click “Add” then “Close”. This should bring in the GeoTIFF
into QGIS:</p>
<p><img src="part2_html_65c48bd9d04af7b7.png" name="Image3" align="bottom" width="624" height="358" border="0"/>
</p>
<p>Now we will need to style the raster. Right click on the raster
and select properties in the drop down menu. This screen will pop up:</p>
<p><img src="part2_html_792f2ef02a962b5b.png" name="Image4" align="bottom" width="715" height="423" border="0"/>
</p>
<p>Under “Render type” click the “Singleband gray” button and
then click “Singleband pseudocolor”. That will bring you to this
screen:</p>
<p><img src="part2_html_7977816f0068c.png" name="Image5" align="bottom" width="630" height="575" border="0"/>
</p>
<p>Click the downward pointing arrow under “Color ramp”. Hover
over “All Color Ramps” and select “Blues”. Click “Classify”,
it should look like this:</p>
<p><img src="part2_html_d4c900f7bf377e43.png" name="Image6" align="bottom" width="776" height="707" border="0"/>
</p>
<p>Now click “OK” and view the styled raster:</p>
<p><img src="part2_html_3b9d4c9bf50ecfdf.png" name="Image7" align="bottom" width="775" height="446" border="0"/>
</p>
<p>Right click on the layer and select properties again. Now select
the “Styles” button in the lower left hand corner:</p>
<p><img src="part2_html_50be88fe2ea146f1.png" name="Image8" align="bottom" width="751" height="689" border="0"/>
</p>
<p>Hit “Save Style…” then type a name for your style and make
sure to change the file extension to “SLD”. Save the file.</p>
<p><img src="part2_html_5b05f4b8a783df7.png" name="Image9" align="bottom" width="759" height="421" border="0"/>
</p>
<p>Now open the&nbsp;.sld in a text editor. Sublime Text can be
downloaded here: <a href="https://www.sublimetext.com/3" target="_blank">https://www.sublimetext.com/3</a></p>
<p>The&nbsp;.sld contains XML code that we will copy onto Geoserver
for our style.</p>
<h4 class="western">Step 2: Add the Style to Geoserver and Apply to
Our&nbsp;Layer</h4>
<p>On your Geoserver admin page, click “Styles” which is located
in the left menu under “Data”. Then click “Add a new style”:</p>
<p><img src="part2_html_5f9434fa00ce7faf.png" name="Image10" align="bottom" width="753" height="519" border="0"/>
</p>
<p>Fill out the “Name” section and copy the following code into
the space at the bottom:</p>
<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;StyledLayerDescriptor xmlns=&quot;<a href="http://www.opengis.net/sld" target="_blank">http://www.opengis.net/sld</a>&quot; xmlns:sld=&quot;<a href="http://www.opengis.net/sld" target="_blank">http://www.opengis.net/sld</a>&quot; version=&quot;1.0.0&quot; xmlns:ogc=&quot;<a href="http://www.opengis.net/ogc" target="_blank">http://www.opengis.net/ogc</a>&quot; xmlns:gml=&quot;<a href="http://www.opengis.net/gml" target="_blank">http://www.opengis.net/gml</a>&quot;&gt;
  &lt;UserLayer&gt;
    &lt;sld:LayerFeatureConstraints&gt;
      &lt;sld:FeatureTypeConstraint/&gt;
    &lt;/sld:LayerFeatureConstraints&gt;
    &lt;sld:UserStyle&gt;
      &lt;sld:Name&gt;timeseries_19810101&lt;/sld:Name&gt;
      &lt;sld:FeatureTypeStyle&gt;
        &lt;sld:Rule&gt;
          &lt;sld:RasterSymbolizer&gt;
            &lt;sld:ChannelSelection&gt;
              &lt;sld:GrayChannel&gt;
                &lt;sld:SourceChannelName&gt;1&lt;/sld:SourceChannelName&gt;
              &lt;/sld:GrayChannel&gt;
            &lt;/sld:ChannelSelection&gt;
            &lt;sld:ColorMap type=&quot;ramp&quot;&gt;
              &lt;sld:ColorMapEntry color=&quot;#f7fbff&quot; quantity=&quot;10.6999998092651&quot; label=&quot;10.6999998092651&quot;/&gt;
              &lt;sld:ColorMapEntry color=&quot;#deebf7&quot; quantity=&quot;63.7959004688263&quot; label=&quot;63.7959004688263&quot;/&gt;
              &lt;sld:ColorMapEntry color=&quot;#c6dbef&quot; quantity=&quot;116.891801128387&quot; label=&quot;116.891801128387&quot;/&gt;
              &lt;sld:ColorMapEntry color=&quot;#9ecae1&quot; quantity=&quot;169.987701787949&quot; label=&quot;169.987701787949&quot;/&gt;
              &lt;sld:ColorMapEntry color=&quot;#6baed6&quot; quantity=&quot;223.08360244751&quot; label=&quot;223.08360244751&quot;/&gt;
              &lt;sld:ColorMapEntry color=&quot;#4292c6&quot; quantity=&quot;276.179503107071&quot; label=&quot;276.179503107071&quot;/&gt;
              &lt;sld:ColorMapEntry color=&quot;#2171b5&quot; quantity=&quot;329.275403766632&quot; label=&quot;329.275403766632&quot;/&gt;
              &lt;sld:ColorMapEntry color=&quot;#08519c&quot; quantity=&quot;378.287004375458&quot; label=&quot;378.287004375458&quot;/&gt;
              &lt;sld:ColorMapEntry color=&quot;#08306b&quot; quantity=&quot;419.130004882813&quot; label=&quot;419.130004882813&quot;/&gt;
            &lt;/sld:ColorMap&gt;
          &lt;/sld:RasterSymbolizer&gt;
        &lt;/sld:Rule&gt;
      &lt;/sld:FeatureTypeStyle&gt;
    &lt;/sld:UserStyle&gt;
  &lt;/UserLayer&gt;
&lt;/StyledLayerDescriptor&gt;</pre><p>
<img src="part2_html_62e589afa817aa28.png" name="Image11" align="bottom" width="719" height="446" border="0"/>
</p>
<p>Click the “Validate” button, then the “Apply” button, and
finally the “Submit” button. In the “Style” section, we
should be able to see our new style as the name we submitted.</p>
<p>Now we need to apply the newly created style to our previously
uploaded timeseries raster layer. Click the “Layers” button under
“Data”. This will bring you to this screen:</p>
<p><img src="part2_html_f87248dc2ee35d75.png" name="Image12" align="bottom" width="732" height="453" border="0"/>
</p>
<p>Click the “timeseries_oregon” layer, then click the
“Publishing” tab. Change the “Default Style” to the
“oregon_style” that we just created. Under “Available Styles”
move the “oregon_style” to the right. It should look like this:</p>
<p><img src="part2_html_81cad138c5772365.png" name="Image13" align="bottom" width="791" height="492" border="0"/>
</p>
<p>Click “Save” at the bottom of the page. Now point your browser
to your HTML file created in Part 1:</p>
<pre style="margin-bottom: 0.2in"><a href="http://34.69.200.202:8080/geoserver/www/timeseries_oregon.html" target="_blank">http://xx.xx.XXX.XXX:8080/geoserver/www/timeseries_oregon.html</a></pre><p>
It should look like this:</p>
<p><img src="part2_html_944b288dfbd2d4df.png" name="Image14" align="bottom" width="690" height="480" border="0"/>
</p>
<p>Congratulations! We have added some straight up steez to our
timeseries raster! On the next post, we will add a nice legend so
people will know what our symbolized raster means. It will be
legendary! #rasternotmonster</p>
<p><img src="part2_html_d2c8798516591721.jpg" name="Image15" align="bottom" width="333" height="500" border="0"/>
</p>
<p><strong>Check out my other blogs here:</strong></p>
<p><strong>Part </strong><strong>1</strong><strong>:
</strong><a href="https://www.davidjleifer.com/blogs/part1.html"><strong><font color="#000080"><span lang="zxx"><u><span style="font-weight: normal">https://www.davidjleifer.com/blogs/part</span></u></span></font></strong><strong><font color="#000080"><span lang="zxx"><u><span style="font-weight: normal">1</span></u></span></font></strong><strong><font color="#000080"><span lang="zxx"><u><span style="font-weight: normal">.html</span></u></span></font></strong></a></p>
<p><strong>Part 3:</strong>
<strong><a href="https://www.davidjleifer.com/blogs/part3.html"><font color="#000080"><span lang="zxx"><u><span style="font-weight: normal">https://www.davidjleifer.com/blogs/part3.html</span></u></span></font></a></strong></p>
<p><strong>Part 4: </strong><strong><a href="https://www.davidjleifer.com/blogs/part4.html"><font color="#000080"><span lang="zxx"><u><span style="font-weight: normal">https://www.davidjleifer.com/blogs/part4.html</span></u></span></font></a></strong></p>
<p><strong>Part 5: </strong><strong><a href="https://www.davidjleifer.com/blogs/part5.html"><font color="#000080"><span lang="zxx"><u><span style="font-weight: normal">https://www.davidjleifer.com/blogs/part5.html</span></u></span></font></a></strong></p>
<p><strong>Part 6: </strong><a href="https://www.davidjleifer.com/blogs/part6.html"><font color="#000080"><span lang="zxx"><u>https://www.davidjleifer.com/blogs/part6.html</u></span></font></a></p>
<p><strong>Part </strong><strong>7</strong><strong>:
</strong><a href="https://www.davidjleifer.com/blogs/part7.html"><font color="#000080"><span lang="zxx"><u>https://www.davidjleifer.com/blogs/part7.html</u></span></font></a></p>
<p><strong>Part </strong><strong>8</strong><strong>:
</strong><a href="https://www.davidjleifer.com/blogs/part8.html"><font color="#000080"><span lang="zxx"><u>https://www.davidjleifer.com/blogs/part8.html</u></span></font></a></p>
<p><strong>Part </strong><strong>9</strong><strong>:
</strong><a href="https://www.davidjleifer.com/blogs/part9.html"><font color="#000080"><span lang="zxx"><u>https://www.davidjleifer.com/blogs/part9.html</u></span></font></a></p>
<p style="font-variant: normal; font-style: normal; font-weight: normal">
<br/>
<br/>

</p>
</body>
</html>